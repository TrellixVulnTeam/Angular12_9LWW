{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { LanguageService } from '@igo2/core';\nimport { ActionbarMode, EntityTableScrollBehavior } from '@igo2/common';\nimport { IgoMap, DataSourceService, LayerService } from '@igo2/geo';\nimport { WorkspaceState } from '@igo2/integration';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@igo2/core\";\nimport * as i2 from \"@igo2/geo\";\nimport * as i3 from \"@igo2/integration\";\nimport * as i4 from \"@angular/material/card\";\nimport * as i5 from \"@igo2/common\";\nimport * as i6 from \"@angular/common\";\n\nfunction AppWorkspaceComponent_ng_container_12_igo_entity_table_paginator_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"igo-entity-table-paginator\", 6);\n    i0.ɵɵlistener(\"paginatorChange\", function AppWorkspaceComponent_ng_container_12_igo_entity_table_paginator_1_Template_igo_entity_table_paginator_paginatorChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.paginatorChange($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const workspace_r2 = i0.ɵɵnextContext().ngIf;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"store\", workspace_r2.entityStore)(\"paginatorOptions\", ctx_r3.paginatorOptions)(\"entitySortChange$\", ctx_r3.entitySortChange$);\n  }\n}\n\nfunction AppWorkspaceComponent_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AppWorkspaceComponent_ng_container_12_igo_entity_table_paginator_1_Template, 1, 3, \"igo-entity-table-paginator\", 5);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const workspace_r2 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 1, workspace_r2.inResolutionRange$));\n  }\n}\n\nfunction AppWorkspaceComponent_ng_container_14_igo_actionbar_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"igo-actionbar\", 10);\n  }\n\n  if (rf & 2) {\n    const workspace_r7 = i0.ɵɵnextContext().ngIf;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"store\", workspace_r7.actionStore)(\"horizontal\", true)(\"withToggleButton\", true)(\"withTitle\", true)(\"mode\", ctx_r8.actionbarMode);\n  }\n}\n\nfunction AppWorkspaceComponent_ng_container_14_igo_entity_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"igo-entity-table\", 11);\n  }\n\n  if (rf & 2) {\n    const workspace_r7 = i0.ɵɵnextContext().ngIf;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"paginator\", ctx_r9.workspacePaginator)(\"scrollBehavior\", ctx_r9.scrollBehavior)(\"store\", workspace_r7.entityStore)(\"template\", workspace_r7.meta.tableTemplate);\n  }\n}\n\nfunction AppWorkspaceComponent_ng_container_14_mat_card_content_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card-content\");\n    i0.ɵɵtext(1, \" No data available at this scale. Please zoom in. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppWorkspaceComponent_ng_container_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AppWorkspaceComponent_ng_container_14_igo_actionbar_1_Template, 1, 5, \"igo-actionbar\", 7);\n    i0.ɵɵtemplate(2, AppWorkspaceComponent_ng_container_14_igo_entity_table_2_Template, 1, 4, \"igo-entity-table\", 8);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵtemplate(4, AppWorkspaceComponent_ng_container_14_mat_card_content_4_Template, 2, 0, \"mat-card-content\", 4);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelement(6, \"igo-workspace-widget-outlet\", 9);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const workspace_r7 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", workspace_r7.actionStore);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", workspace_r7.entityStore && workspace_r7.meta && workspace_r7.meta.tableTemplate && i0.ɵɵpipeBind1(3, 4, workspace_r7.inResolutionRange$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 6, workspace_r7.inResolutionRange$) === false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"workspace\", workspace_r7);\n  }\n}\n\nexport let AppWorkspaceComponent = /*#__PURE__*/(() => {\n  class AppWorkspaceComponent {\n    constructor(languageService, dataSourceService, layerService, workspaceState) {\n      this.languageService = languageService;\n      this.dataSourceService = dataSourceService;\n      this.layerService = layerService;\n      this.workspaceState = workspaceState;\n      this.entitySortChange$ = new BehaviorSubject(false);\n      this.paginatorOptions = {\n        pageSize: 5,\n        pageSizeOptions: [1, 5, 10, 15, 30, 50, 100],\n        showFirstLastButtons: true // Whether to show the first/last buttons UI to the user.\n\n      };\n      this.map = new IgoMap({\n        controls: {\n          attribution: {\n            collapsed: true\n          }\n        }\n      });\n      this.view = {\n        center: [-72, 47.2],\n        zoom: 5\n      };\n      this.actionbarMode = ActionbarMode.Overlay;\n      this.scrollBehavior = EntityTableScrollBehavior.Instant;\n    }\n\n    get workspaceStore() {\n      return this.workspaceState.store;\n    }\n\n    ngOnInit() {\n      this.selectedWorkspace$ = this.workspaceStore.stateView.firstBy$(record => record.state.selected === true).pipe(map(record => {\n        const entity = record === undefined ? undefined : record.entity;\n\n        if (entity) {\n          // In fact, the download action is not fully functionnal into the igo2-lib demo\n          // The reason why it's has been remove is that this button trigger a tool (importExport)\n          // and this tool is not available in the igo2-lib demo.\n          // This is why it's has been removed frome the actions's list.\n          // Refer to the igo2 demo at https://infra-geo-ouverte.github.io/igo2/\n          entity.actionStore.view.filter(action => {\n            return action.id !== 'wfsDownload';\n          });\n        }\n\n        return entity;\n      }));\n      this.dataSourceService.createAsyncDataSource({\n        type: 'osm'\n      }).subscribe(dataSource => {\n        this.map.addLayer(this.layerService.createLayer({\n          title: 'OSM',\n          source: dataSource\n        }));\n      }); // const wmsDataSourceOptions = {\n      //   type: 'wms',\n      //   url: 'https://ahocevar.com/geoserver/wms',\n      //   urlWfs: 'https://ahocevar.com/geoserver/wfs',\n      //   params: {\n      //     LAYERS: 'water_areas',\n      //     VERSION: '1.3.0'\n      //   },\n      //   paramsWFS: {\n      //     featureTypes: 'water_areas',\n      //     fieldNameGeometry: 'the_geom',\n      //     maxFeatures: 10000,\n      //     version: '1.1.0',\n      //     outputFormat: 'application/json',\n      //     outputFormatDownload: 'application/vnd.google-earth.kml+xml'\n      //   },\n      //   sourceFields: [\n      //     {name: 'waterway', alias: 'Chemin d eau'},\n      //     {name: 'osm_id'},\n      //     {name: 'landuse'}\n      //   ],\n      //   ogcFilters: {\n      //     enabled: true,\n      //     editable: true\n      //   },\n      //   serverType: 'geoserver'\n      // };\n      //\n      // this.dataSourceService\n      //   .createAsyncDataSource(wmsDataSourceOptions as OgcFilterableDataSourceOptions)\n      //   .subscribe(dataSource => {\n      //     const layer = {\n      //       optionsFromCapabilities: true,\n      //       title: 'WMS Geoserver filterable ',\n      //       visible: true,\n      //       source: dataSource\n      //     };\n      //     this.map.addLayer(this.layerService.createLayer(layer));\n      //   });\n\n      const wfsDataSourceOptions = {\n        type: 'wfs',\n        url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n        params: {\n          featureTypes: 'etablissement_mtq',\n          fieldNameGeometry: 'geometry',\n          version: '2.0.0',\n          outputFormat: 'geojson'\n        },\n        sourceFields: [{\n          name: 'idetablis',\n          alias: 'ID'\n        }, {\n          name: 'nometablis',\n          alias: 'Name'\n        }, {\n          name: 'typetablis',\n          alias: 'Type'\n        }]\n      };\n      this.dataSourceService.createAsyncDataSource(wfsDataSourceOptions).subscribe(dataSource => {\n        const layer = {\n          title: 'Simple WFS ',\n          maxResolution: 3000,\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n    }\n\n    paginatorChange(event) {\n      this.workspacePaginator = event;\n    }\n\n  }\n\n  AppWorkspaceComponent.ɵfac = function AppWorkspaceComponent_Factory(t) {\n    return new (t || AppWorkspaceComponent)(i0.ɵɵdirectiveInject(i1.LanguageService), i0.ɵɵdirectiveInject(i2.DataSourceService), i0.ɵɵdirectiveInject(i2.LayerService), i0.ɵɵdirectiveInject(i3.WorkspaceState));\n  };\n\n  AppWorkspaceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppWorkspaceComponent,\n    selectors: [[\"app-workspace\"]],\n    decls: 16,\n    vars: 11,\n    consts: [[\"href\", \"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/workspace\"], [3, \"map\", \"view\"], [\"color\", \"primary\", 3, \"map\"], [\"igoWorkspaceSelector\", \"\", 3, \"store\", \"map\"], [4, \"ngIf\"], [3, \"store\", \"paginatorOptions\", \"entitySortChange$\", \"paginatorChange\", 4, \"ngIf\"], [3, \"store\", \"paginatorOptions\", \"entitySortChange$\", \"paginatorChange\"], [3, \"store\", \"horizontal\", \"withToggleButton\", \"withTitle\", \"mode\", 4, \"ngIf\"], [\"class\", \"table-compact table-centered\", 3, \"paginator\", \"scrollBehavior\", \"store\", \"template\", 4, \"ngIf\"], [3, \"workspace\"], [3, \"store\", \"horizontal\", \"withToggleButton\", \"withTitle\", \"mode\"], [1, \"table-compact\", \"table-centered\", 3, \"paginator\", \"scrollBehavior\", \"store\", \"template\"]],\n    template: function AppWorkspaceComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\");\n        i0.ɵɵelementStart(1, \"mat-card-subtitle\");\n        i0.ɵɵtext(2, \"Geo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"mat-card-title\");\n        i0.ɵɵtext(4, \"Workspace\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"mat-card-content\");\n        i0.ɵɵtext(6, \" See the \");\n        i0.ɵɵelementStart(7, \"a\", 0);\n        i0.ɵɵtext(8, \"code of this example\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"igo-map-browser\", 1);\n        i0.ɵɵelement(10, \"igo-zoom-button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"igo-workspace-selector\", 3);\n        i0.ɵɵtemplate(12, AppWorkspaceComponent_ng_container_12_Template, 3, 3, \"ng-container\", 4);\n        i0.ɵɵpipe(13, \"async\");\n        i0.ɵɵtemplate(14, AppWorkspaceComponent_ng_container_14_Template, 7, 8, \"ng-container\", 4);\n        i0.ɵɵpipe(15, \"async\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"map\", ctx.map)(\"view\", ctx.view);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"map\", ctx.map);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"store\", ctx.workspaceStore)(\"map\", ctx.map);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(13, 7, ctx.selectedWorkspace$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(15, 9, ctx.selectedWorkspace$));\n      }\n    },\n    directives: [i4.MatCard, i4.MatCardSubtitle, i4.MatCardTitle, i4.MatCardContent, i2.MapBrowserComponent, i2.ZoomButtonComponent, i5.WorkspaceSelectorComponent, i2.WorkspaceSelectorDirective, i6.NgIf, i5.EntityTablePaginatorComponent, i5.WorkspaceWidgetOutletComponent, i5.ActionbarComponent, i5.EntityTableComponent],\n    pipes: [i6.AsyncPipe],\n    styles: [\"igo-map-browser[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 300px;\\n}\\n\\nigo-panel[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding-top: 10px;\\n}\\n\\nigo-entity-table[_ngcontent-%COMP%] {\\n  height: 400px;\\n}\\n\\nigo-actionbar[_ngcontent-%COMP%] {\\n  height: 48px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndvcmtzcGFjZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0VBQ0EsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLGFBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7QUFDRiIsImZpbGUiOiJ3b3Jrc3BhY2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpZ28tbWFwLWJyb3dzZXIge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAzMDBweDtcbn1cblxuaWdvLXBhbmVsIHtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmctdG9wOiAxMHB4O1xufVxuXG5pZ28tZW50aXR5LXRhYmxlIHtcbiAgaGVpZ2h0OiA0MDBweDtcbn1cblxuaWdvLWFjdGlvbmJhciB7XG4gIGhlaWdodDogNDhweDtcbn1cbiJdfQ== */\"]\n  });\n  return AppWorkspaceComponent;\n})();","map":{"version":3,"sources":["C:\\Users\\admin\\Downloads\\angular\\igo2-lib-master\\demo\\src\\app\\geo\\workspace\\workspace.component.ts","C:\\Users\\admin\\Downloads\\angular\\igo2-lib-master\\demo\\src\\app\\geo\\workspace\\workspace.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\n\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  ActionbarMode,\n  EntityRecord,\n  EntityTableScrollBehavior,\n  Workspace,\n  WorkspaceStore,\n  EntityTablePaginatorOptions\n} from '@igo2/common';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WFSDataSourceOptions\n} from '@igo2/geo';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { WorkspaceState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-workspace',\n  templateUrl: './workspace.component.html',\n  styleUrls: ['./workspace.component.scss']\n})\nexport class AppWorkspaceComponent implements OnInit {\n\n  public workspacePaginator: MatPaginator;\n  entitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 5, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 15, 30, 50, 100], // The set of provided page size options to display to the user.\n    showFirstLastButtons: true // Whether to show the first/last buttons UI to the user.\n  };\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-72, 47.2],\n    zoom: 5\n  };\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  public selectedWorkspace$: Observable<Workspace>;\n\n  public actionbarMode = ActionbarMode.Overlay;\n\n  public scrollBehavior = EntityTableScrollBehavior.Instant;\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    public workspaceState: WorkspaceState,\n  ) {}\n\n  ngOnInit() {\n    this.selectedWorkspace$ = this.workspaceStore.stateView\n      .firstBy$(\n        (record: EntityRecord<Workspace>) => record.state.selected === true\n      )\n      .pipe(\n        map((record: EntityRecord<Workspace>) => {\n          const entity = record === undefined ? undefined : record.entity;\n          if (entity) {\n            // In fact, the download action is not fully functionnal into the igo2-lib demo\n            // The reason why it's has been remove is that this button trigger a tool (importExport)\n            // and this tool is not available in the igo2-lib demo.\n            // This is why it's has been removed frome the actions's list.\n            // Refer to the igo2 demo at https://infra-geo-ouverte.github.io/igo2/\n            entity.actionStore.view.filter((action) => {\n              return action.id !== 'wfsDownload';\n            });\n          }\n          return entity;\n\n        })\n      );\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    // const wmsDataSourceOptions = {\n    //   type: 'wms',\n    //   url: 'https://ahocevar.com/geoserver/wms',\n    //   urlWfs: 'https://ahocevar.com/geoserver/wfs',\n    //   params: {\n    //     LAYERS: 'water_areas',\n    //     VERSION: '1.3.0'\n    //   },\n    //   paramsWFS: {\n    //     featureTypes: 'water_areas',\n    //     fieldNameGeometry: 'the_geom',\n    //     maxFeatures: 10000,\n    //     version: '1.1.0',\n    //     outputFormat: 'application/json',\n    //     outputFormatDownload: 'application/vnd.google-earth.kml+xml'\n    //   },\n    //   sourceFields: [\n    //     {name: 'waterway', alias: 'Chemin d eau'},\n    //     {name: 'osm_id'},\n    //     {name: 'landuse'}\n    //   ],\n    //   ogcFilters: {\n    //     enabled: true,\n    //     editable: true\n    //   },\n    //   serverType: 'geoserver'\n    // };\n    //\n    // this.dataSourceService\n    //   .createAsyncDataSource(wmsDataSourceOptions as OgcFilterableDataSourceOptions)\n    //   .subscribe(dataSource => {\n    //     const layer = {\n    //       optionsFromCapabilities: true,\n    //       title: 'WMS Geoserver filterable ',\n    //       visible: true,\n    //       source: dataSource\n    //     };\n    //     this.map.addLayer(this.layerService.createLayer(layer));\n    //   });\n\n    const wfsDataSourceOptions: WFSDataSourceOptions = {\n      type: 'wfs',\n      url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n      params: {\n        featureTypes: 'etablissement_mtq',\n        fieldNameGeometry: 'geometry',\n        version: '2.0.0',\n        outputFormat: 'geojson'\n      },\n      sourceFields: [\n        { name: 'idetablis', alias: 'ID' },\n        { name: 'nometablis', alias: 'Name' },\n        { name: 'typetablis', alias: 'Type' }\n      ]\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDataSourceOptions)\n      .subscribe(dataSource => {\n        const layer = {\n          title: 'Simple WFS ',\n          maxResolution: 3000,\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n\n  paginatorChange(event: MatPaginator) {\n    this.workspacePaginator = event;\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Workspace</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/workspace\">code of this example</a>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-workspace-selector\n    igoWorkspaceSelector\n    [store]=\"workspaceStore\"\n    [map]=\"map\">\n  </igo-workspace-selector>\n\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n    <igo-entity-table-paginator\n      *ngIf=\"workspace.inResolutionRange$ | async\"\n      [store]=\"workspace.entityStore\"\n      [paginatorOptions]=\"paginatorOptions\"\n      [entitySortChange$]=\"entitySortChange$\"\n      (paginatorChange)=\"paginatorChange($event)\">\n    </igo-entity-table-paginator>\n  </ng-container>\n\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n    <igo-actionbar\n      *ngIf=\"workspace.actionStore\"\n      [store]=\"workspace.actionStore\"\n      [horizontal]=\"true\"\n      [withToggleButton]=\"true\"\n      [withTitle]=\"true\"\n      [mode]=\"actionbarMode\">\n    </igo-actionbar>\n\n    <igo-entity-table\n      *ngIf=\"workspace.entityStore && workspace.meta && workspace.meta.tableTemplate && (workspace.inResolutionRange$ | async)\"\n      class=\"table-compact table-centered\"\n      [paginator]=\"workspacePaginator\"\n      [scrollBehavior]=\"scrollBehavior\"\n      [store]=\"workspace.entityStore\"\n      [template]=\"workspace.meta.tableTemplate\">\n    </igo-entity-table>\n    <mat-card-content\n    *ngIf=\"(workspace.inResolutionRange$ | async) === false\">\n      No data available at this scale. Please zoom in. \n    </mat-card-content>\n\n    <igo-workspace-widget-outlet [workspace]=\"workspace\"></igo-workspace-widget-outlet>\n\n  </ng-container>\n\n</mat-card>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}