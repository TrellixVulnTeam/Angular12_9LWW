{"ast":null,"code":"import { LanguageService } from '@igo2/core';\nimport { IgoMap, DataSourceService, LayerService } from '@igo2/geo';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@igo2/core\";\nimport * as i2 from \"@igo2/geo\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@igo2/common\";\n\nfunction AppLayerComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"igo-metadata-button\", 6);\n    i0.ɵɵelement(1, \"igo-download-button\", 6);\n    i0.ɵɵelement(2, \"igo-ogc-filter-button\", 7);\n    i0.ɵɵelement(3, \"igo-time-filter-button\", 7);\n    i0.ɵɵelement(4, \"igo-track-feature-button\", 8);\n  }\n\n  if (rf & 2) {\n    const layer_r2 = ctx.layer;\n    i0.ɵɵproperty(\"layer\", layer_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"layer\", layer_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"header\", true)(\"layer\", layer_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"header\", true)(\"layer\", layer_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"layer\", layer_r2)(\"trackFeature\", true);\n  }\n}\n\nexport let AppLayerComponent = /*#__PURE__*/(() => {\n  class AppLayerComponent {\n    constructor(languageService, dataSourceService, layerService) {\n      this.languageService = languageService;\n      this.dataSourceService = dataSourceService;\n      this.layerService = layerService;\n      this.map = new IgoMap({\n        controls: {\n          attribution: {\n            collapsed: true\n          }\n        }\n      });\n      this.view = {\n        center: [-73, 47.2],\n        maxLayerZoomExtent: [-11000000, 4500000, -4500000, 10000000],\n        zoom: 7\n      };\n      this.dataSourceService.createAsyncDataSource({\n        type: 'osm'\n      }).subscribe(dataSource => {\n        this.map.addLayer(this.layerService.createLayer({\n          title: 'OSM',\n          visible: true,\n          baseLayer: true,\n          source: dataSource\n        }));\n      });\n      const wfsDatasource = {\n        type: 'wfs',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n        params: {\n          featureTypes: 'vg_observation_v_autre_wmst',\n          fieldNameGeometry: 'geometry',\n          maxFeatures: 10000,\n          version: '2.0.0',\n          outputFormat: undefined,\n          outputFormatDownload: 'shp'\n        },\n        ogcFilters: {\n          enabled: true,\n          editable: true,\n          filters: {\n            operator: 'PropertyIsEqualTo',\n            propertyName: 'code_municipalite',\n            expression: '10043'\n          }\n        }\n      };\n      this.dataSourceService.createAsyncDataSource(wfsDatasource).subscribe(dataSource => {\n        const layer = {\n          title: 'WFS ',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n      const wfsDatasourceCustomEPSG = {\n        type: 'wfs',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n        params: {\n          featureTypes: 'vg_observation_v_autre_wmst',\n          fieldNameGeometry: 'geometry',\n          maxFeatures: 10000,\n          version: '2.0.0',\n          outputFormat: 'geojson_utf8',\n          srsName: 'EPSG:32198',\n          outputFormatDownload: 'shp'\n        },\n        ogcFilters: {\n          enabled: true,\n          editable: true,\n          filters: {\n            operator: 'PropertyIsEqualTo',\n            propertyName: 'code_municipalite',\n            expression: '12072'\n          }\n        },\n        formatOptions: {\n          dataProjection: 'EPSG:32198'\n        }\n      };\n      this.dataSourceService.createAsyncDataSource(wfsDatasourceCustomEPSG).subscribe(dataSource => {\n        const layer = {\n          title: 'WFS (Custom EPSG)',\n          visible: true,\n          source: dataSource,\n          removable: false\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n      this.layerService.createAsyncLayer({\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'parc_routier',\n            VERSION: '1.3.0'\n          }\n        }\n      }).subscribe(l => this.map.addLayer(l));\n      this.layerService.createAsyncLayer({\n        title: 'Réseau routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      }).subscribe(l => this.map.addLayer(l));\n      this.layerService.createAsyncLayer({\n        title: 'lieu habité',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      }).subscribe(l => this.map.addLayer(l));\n      this.layerService.createAsyncLayer({\n        title: 'sh_dis_eco',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'sh_dis_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      }).subscribe(l => this.map.addLayer(l));\n      this.layerService.createAsyncLayer({\n        title: 'nurc:Arc_Sample_Parent',\n        visible: false,\n        legendOptions: {\n          // collapsed: false,\n          display: true,\n          // url: 'https://v.seloger.com/s/width/1144/visuels/0/m/l/4/0ml42xbt1n3itaboek3qec5dtskdgw6nlscu7j69k.jpg',\n          stylesAvailable: [{\n            name: 'rain',\n            title: 'Pluie'\n          }, {\n            name: 'raster',\n            title: 'Défaut'\n          }] //\n\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://demo.geo-solutions.it/geoserver/ows',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'nurc:Arc_Sample',\n            VERSION: '1.3.0'\n          }\n        }\n      }).subscribe(l => this.map.addLayer(l));\n      this.layerService.createAsyncLayer({\n        title: 'Avertissements routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      }).subscribe(l => this.map.addLayer(l));\n      const datasource = {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n        refreshIntervalSec: 15,\n        params: {\n          LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n          VERSION: '1.3.0'\n        }\n      };\n      this.dataSourceService.createAsyncDataSource(datasource).subscribe(dataSource => {\n        const layer = {\n          title: 'Embâcle',\n          source: dataSource,\n          metadata: {\n            url: 'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n            extern: true\n          }\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n    }\n\n  }\n\n  AppLayerComponent.ɵfac = function AppLayerComponent_Factory(t) {\n    return new (t || AppLayerComponent)(i0.ɵɵdirectiveInject(i1.LanguageService), i0.ɵɵdirectiveInject(i2.DataSourceService), i0.ɵɵdirectiveInject(i2.LayerService));\n  };\n\n  AppLayerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppLayerComponent,\n    selectors: [[\"app-layer\"]],\n    decls: 19,\n    vars: 7,\n    consts: [[\"href\", \"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/layer\"], [3, \"map\", \"view\"], [\"color\", \"primary\", 3, \"map\"], [\"title\", \"Layers\"], [\"floatLabel\", \"never\", 3, \"map\", \"layers\", \"expandLegendOfVisibleLayers\", \"queryBadge\"], [\"igoLayerItemToolbar\", \"\"], [3, \"layer\"], [3, \"header\", \"layer\"], [3, \"layer\", \"trackFeature\"]],\n    template: function AppLayerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\");\n        i0.ɵɵelementStart(1, \"mat-card-subtitle\");\n        i0.ɵɵtext(2, \"Geo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"mat-card-title\");\n        i0.ɵɵtext(4, \"Simple Map\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"mat-card-content\");\n        i0.ɵɵelementStart(6, \"li\");\n        i0.ɵɵtext(7, \"Dependencies: LanguageService\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"br\");\n        i0.ɵɵtext(9, \" See the \");\n        i0.ɵɵelementStart(10, \"a\", 0);\n        i0.ɵɵtext(11, \"code of this example\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"hr\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"igo-map-browser\", 1);\n        i0.ɵɵelement(14, \"igo-zoom-button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"igo-panel\", 3);\n        i0.ɵɵelementStart(16, \"igo-layer-list\", 4);\n        i0.ɵɵtemplate(17, AppLayerComponent_ng_template_17_Template, 5, 8, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"map\", ctx.map)(\"view\", ctx.view);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"map\", ctx.map);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"map\", ctx.map)(\"layers\", ctx.map.layers)(\"expandLegendOfVisibleLayers\", false)(\"queryBadge\", true);\n      }\n    },\n    directives: [i3.MatCard, i3.MatCardSubtitle, i3.MatCardTitle, i3.MatCardContent, i2.MapBrowserComponent, i2.ZoomButtonComponent, i4.PanelComponent, i2.LayerListComponent, i2.MetadataButtonComponent, i2.DownloadButtonComponent, i2.OgcFilterButtonComponent, i2.TimeFilterButtonComponent, i2.TrackFeatureButtonComponent],\n    styles: [\"igo-map-browser[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 300px;\\n}\\n\\nigo-panel[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxheWVyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7RUFDQSxpQkFBQTtBQUNGIiwiZmlsZSI6ImxheWVyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaWdvLW1hcC1icm93c2VyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMzAwcHg7XG59XG5cbmlnby1wYW5lbCB7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nLXRvcDogMTBweDtcbn1cbiJdfQ== */\"]\n  });\n  return AppLayerComponent;\n})();","map":{"version":3,"sources":["C:\\Users\\admin\\Downloads\\igo2-lib-master\\igo2-lib-master\\demo\\src\\app\\geo\\layer\\layer.component.ts","C:\\Users\\admin\\Downloads\\igo2-lib-master\\igo2-lib-master\\demo\\src\\app\\geo\\layer\\layer.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WMSDataSourceOptions,\n  LayerOptions,\n  WFSDataSourceOptions,\n  OgcFilterableDataSourceOptions,\n  MetadataLayerOptions\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-layer',\n  templateUrl: './layer.component.html',\n  styleUrls: ['./layer.component.scss']\n})\nexport class AppLayerComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    maxLayerZoomExtent: [-11000000, 4500000, -4500000, 10000000],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            visible: true,\n            baseLayer: true,\n            source: dataSource\n          })\n        );\n      });\n\n    interface WFSoptions\n      extends WFSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const wfsDatasource: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '10043'\n        }\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS ',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    const wfsDatasourceCustomEPSG: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: 'geojson_utf8',\n        srsName: 'EPSG:32198',\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '12072'\n        }\n      },\n      formatOptions: {\n        dataProjection: 'EPSG:32198'\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasourceCustomEPSG)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS (Custom EPSG)',\n          visible: true,\n          source: dataSource,\n          removable: false\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'parc_routier',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Réseau routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'lieu habité',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'sh_dis_eco',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'sh_dis_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'nurc:Arc_Sample_Parent',\n        visible: false,\n        legendOptions: {\n          // collapsed: false,\n          display: true,\n          // url: 'https://v.seloger.com/s/width/1144/visuels/0/m/l/4/0ml42xbt1n3itaboek3qec5dtskdgw6nlscu7j69k.jpg',\n          stylesAvailable: [\n            { name: 'rain', title: 'Pluie' },\n            { name: 'raster', title: 'Défaut' }\n          ] //\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://demo.geo-solutions.it/geoserver/ows',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'nurc:Arc_Sample', // , test:Linea_costa\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Avertissements routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    const datasource: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      refreshIntervalSec: 15,\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      }\n    };\n\n    interface LayerOptionsWithMetadata\n      extends LayerOptions,\n        MetadataLayerOptions {}\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptionsWithMetadata = {\n          title: 'Embâcle',\n          source: dataSource,\n          metadata: {\n            url:\n              'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n            extern: true\n          }\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/layer\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Layers\">\n    <igo-layer-list\n    [map]=\"map\"\n    [layers]=\"map.layers\"\n    [expandLegendOfVisibleLayers]=\"false\"\n    floatLabel=\"never\"\n    [queryBadge]=\"true\">\n\n      <ng-template #igoLayerItemToolbar let-layer=\"layer\">\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n        <igo-download-button [layer]=\"layer\"></igo-download-button>\n        <igo-ogc-filter-button [header]=\"true\" [layer]=\"layer\"></igo-ogc-filter-button>\n        <igo-time-filter-button [header]=\"true\" [layer]=\"layer\"></igo-time-filter-button>\n        <igo-track-feature-button [layer]=\"layer\" [trackFeature]=\"true\"></igo-track-feature-button>\n      </ng-template>\n\n    </igo-layer-list>\n  </igo-panel>\n\n</mat-card>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}